#IfWinActive GTA:SA:MP
SendMode Input
#UseHook
#NoEnv
#SingleInstance, force
#Include SAMP.ahk

:?:/berardi::
sleep 250
ShowDialog("0", "BerardiAHK | {8470FF}FamilyBerardi", "{FFFFFF}Узнать администраторов онлайн{8470FF} /admins`n{FFFFFF}Для отправки объявлений о наборе{8470FF} /nabor`n{FFFFFF}Рассказать информацию для новобранцев {8470FF}/info`n`n{FFFFFF}Для личных целей`n{FFFFFF}/lockrp {8470FF}| Role-play Открытие/закрытие личного транспорта`n{FFFFFF}F5 {8470FF}| Узнать время без ввода команды /time + Скриншот`n`n{FFFFFF}Для собеседования`n{FFFFFF}ALT + 1 {8470FF}| Здравствуйте, вы на собеседование?`n{FFFFFF}ALT + 2 {8470FF}| Хорошо, предъявите паспорт, лицензии и трудовую книжку. | (/n /pass | /lic | /joblist)`n{FFFFFF}ALT + 3 {8470FF}| Отлично, вы готовы пройти психологический тест?`n{FFFFFF}ALT + 4 {8470FF}| Что у меня под ногами?`n{FFFFFF}ALT + 5 {8470FF}| Отлично, ваш ответ был верный. | Присядьте.`n{FFFFFF}ALT + 6 {8470FF}| /n Встанешь - дам Зама! | /n Встань, дам 5.000$ | Встаньте.`n{FFFFFF}ALT + 7 {8470FF}| /n RP MG SK in /n | /n RP MG SK in /n`n{FFFFFF}ALT + 8 {8470FF}| Вы нам подходите!`n{FFFFFF}ALT + 9 {8470FF}| /me достал форму и бейджик из шкафа | /do Форма и бейджик в руке. | /me передал форму и бейджик человеку напротив`n{FFFFFF}ALT + 0 {8470FF}| К сожалению, вы нам не подходите.`n`n{FFFFFF}Автор скрипта: Lorenzo_Berardi`nСтатус версии скрипта - {008000}Обновлено", "Закрыть")
return

:?:/lockrp::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/me движением руки достал из кармана ключи от автомобиля{ENTER}
sleep 1100
Sendinput, {F6}/do Ключи от автомобиля в руке у Берарди.{ENTER}
sleep 1100
Sendinput, {F6}/lock{ENTER}
return

:?:/nabor::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/ad{ENTER}
sleep 1000
Sendinput, {ENTER}
sleep 500
Sendinput, Проходит собеседование в ресторан 'New Italy'. Мы в навигаторе 4-6{ENTER}
sleep 500
Sendinput, {ENTER}

sleep 1000
Sendinput, {F6}/ad{ENTER}
sleep 1000
Sendinput, {DOWN}{ENTER}
sleep 500
Sendinput, Проходит собеседование в ресторан 'New Italy'. Мы в навигаторе 4-6{ENTER}
sleep 500
Sendinput, {ENTER}

sleep 1000
Sendinput, {F6}/ad{ENTER}
sleep 1000
Sendinput, {DOWN 2}{ENTER}
sleep 500
Sendinput, Проходит собеседование в ресторан 'New Italy'. Мы в навигаторе 4-6{ENTER}
sleep 500
Sendinput, {ENTER}
return

:?:/info::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/fn 1. Всю подробную инф. о повышениях вы найдете на форуме.{ENTER}
sleep 1000
Sendinput, {F6}/fn 2. Обязательно чекайте FAQ. За незнание FAQ вы будете наказаны.{ENTER}
sleep 1000
Sendinput, {F6}/fn 3. Grand-rp.su>>Saturn>>Мафии>>Сицилия{ENTER}
sleep 1000
Sendinput, {F6}/fn 4. Пароль от приватного раздела: only_for_familia{ENTER}
sleep 1000
Sendinput, {F6}/fn 5. В FAQ вы будете прикрыватся: Вместо 'ПТ'-Перец. и т.д.{ENTER}
sleep 1000
Sendinput, {F6}/fn 6. Связь с нами: http://discord.gg/J953W{ENTER}
sleep 1000
Sendinput, {F6}/fn 7. Просить ПТ нельзя, мы их продаем 1 пт=10${ENTER}
sleep 1000
return

F5::
sleep 250
SendMessage, 0x50,, 0x4190419,, A
SendInput, {F6}/me посмотрел на часы с гравировкой "Berardi"{ENTER}
sleep 1000
SendInput, {F6}/time{ENTER}
sleep 100
SendInput, {F8}
return

!1::
sleep 100
SendMessage, 0x50,, 0x4190419,,
Sendinput, {F6}Здравствуйте, вы на собеседование?{ENTER}
return

!2::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}Хорошо, предъявите паспорт, лицензии и трудовую книжку.{ENTER}
sleep 1100
Sendinput, {F6}/n /pass <id>, /lic <id>, /joblist <id>{ENTER}
return

!3::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}Отлично, вы готовы пройти психологический тест?{ENTER}
return

!4::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}Что у меня над головой?{ENTER}
return

!5::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}Отлично, ваш ответ верный.{ENTER}
sleep 1000
Sendinput, {F6}Присядьте.{ENTER}
return

!6::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/n встанешь, дам 5.000${ENTER}
sleep 4000
Sendinput, {F6}Встаньте.{ENTER}
return

!7::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/n RP MG SK in /n{ENTER}
sleep 1100
Sendinput, {F6}/n RP MG SK in /n{ENTER}
return

!8::
sleep 100
SendMessage, 0x50,, 0x4190419,,
Sendinput, {F6}Поздравляю, вы приняты{ENTER}
return

!9::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}/do Пакет с формой в руке.{ENTER}
sleep 1500
Sendinput, {F6}/me передал пакет и бейджик человеку напротив{ENTER}
sleep 1500
Sendinput, {F6}Добро пожаловать, рады вас видеть{ENTER}
return

!0::
sleep 100
SendMessage, 0x50,, 0x4190419,, A
Sendinput, {F6}К сожалению, вы нам не подходите.{ENTER}
return

:?:/admins::
sleep 100
IfNotExist, admins_online.txt
FileAppend,,admins_online.txt
fstring := ""
Loop, read, admins_online.txt
{
StringReplace, Nick, A_LoopReadLine,%A_SPACE%,, All
if(StrLen(Nick) = 0)  
continue
id := getPlayerIdByName(Nick)
if(id = -1)
continue
fstring := fstring . getPlayerNameById(id) . "[" . id . "]`n"
ShowDialog("0", "BerardiAHK | {8470FF}Admin's online", fstring, "Закрыть")
}
if fstring = ;
{
ShowDialog("0", "BerardiAHK | {8470FF}Admin's online", "Администраторов нету в сети.", "Закрыть")
}
return

buildscr = 6 ;версия для сравнения, если меньше чем в verlen.ini - обновляем
downlurl := "raw ссылка на updt.exe"
downllen := "raw ссылка на verlen.ini"

Utf8ToAnsi(ByRef Utf8String, CodePage = 1251)
{
    If (NumGet(Utf8String) & 0xFFFFFF) = 0xBFBBEF
        BOM = 3
    Else
        BOM = 0

    UniSize := DllCall("MultiByteToWideChar", "UInt", 65001, "UInt", 0
                    , "UInt", &Utf8String + BOM, "Int", -1
                    , "Int", 0, "Int", 0)
    VarSetCapacity(UniBuf, UniSize * 2)
    DllCall("MultiByteToWideChar", "UInt", 65001, "UInt", 0
                    , "UInt", &Utf8String + BOM, "Int", -1
                    , "UInt", &UniBuf, "Int", UniSize)

    AnsiSize := DllCall("WideCharToMultiByte", "UInt", CodePage, "UInt", 0
                    , "UInt", &UniBuf, "Int", -1
                    , "Int", 0, "Int", 0
                    , "Int", 0, "Int", 0)
    VarSetCapacity(AnsiString, AnsiSize)
    DllCall("WideCharToMultiByte", "UInt", CodePage, "UInt", 0
                    , "UInt", &UniBuf, "Int", -1
                    , "Str", AnsiString, "Int", AnsiSize
                    , "Int", 0, "Int", 0)
    Return AnsiString
}
WM_HELP(){
    IniRead, vupd, %a_temp%/verlen.ini, UPD, v
    IniRead, desupd, %a_temp%/verlen.ini, UPD, des
    desupd := Utf8ToAnsi(desupd)
    IniRead, updupd, %a_temp%/verlen.ini, UPD, upd
    updupd := Utf8ToAnsi(updupd)
    msgbox, , Список изменений версии %vupd%, %updupd%
    return
}

OnMessage(0x53, "WM_HELP")
Gui +OwnDialogs

SplashTextOn, , 60,Автообновление, Запуск скрипта. Ожидайте..`nПроверяем наличие обновлений.
URLDownloadToFile, %downllen%, %a_temp%/verlen.ini
IniRead, buildupd, %a_temp%/verlen.ini, UPD, build
if buildupd =
{
    SplashTextOn, , 60,Автообновление, Запуск скрипта. Ожидайте..`nОшибка. Нет связи с сервером.
    sleep, 2000
}
if buildupd > % buildscr
{
    IniRead, vupd, %a_temp%/verlen.ini, UPD, v
    SplashTextOn, , 60,Автообновление, Запуск скрипта. Ожидайте..`nОбнаружено обновление до версии %vupd%!
    sleep, 2000
    IniRead, desupd, %a_temp%/verlen.ini, UPD, des
    desupd := Utf8ToAnsi(desupd)
    IniRead, updupd, %a_temp%/verlen.ini, UPD, upd
    updupd := Utf8ToAnsi(updupd)
    SplashTextoff
    msgbox, 16384, Обновление скрипта до версии %vupd%, %desupd%
    IfMsgBox OK
    {
        msgbox, 1, Обновление скрипта до версии %vupd%, Хотите ли Вы обновиться?
        IfMsgBox OK
        {
            put2 := % A_ScriptFullPath
            RegWrite, REG_SZ, HKEY_CURRENT_USER, Software\SAMP ,put2 , % put2
            SplashTextOn, , 60,Автообновление, Обновление. Ожидайте..`nОбновляем скрипт до версии %vupd%!
            URLDownloadToFile, %downlurl%, %a_temp%/updt.exe
            sleep, 1000
            run, %a_temp%/updt.exe
            exitapp
        }
    }
}
SplashTextoff
